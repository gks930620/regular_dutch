# 작업 체크리스트
- 문서명: 체크리스트
- 기준 문서: `PRD.md`
- 앱: Regular Dutch(그룹 결제자 관리 앱)
- 업데이트: 2025-10-24

## 1. 환경/빌드 정비
- [X] `android/settings.gradle`의 `com.android.application`/`com.android.library` 버전을 `8.3.0`으로 통일
- [X] `android/build.gradle`의 AGP `classpath` 중복 정의 제거(플러그인 버전은 `settings.gradle` 한 곳에서만 관리)
- [ ] `android/gradle/wrapper/gradle-wrapper.properties`를 Gradle `8.5`~`8.6`으로 업데이트
- [ ] Android Studio \> Gradle JDK를 `17`로 고정(Windows)
- [ ] Flutter \+ 패키지 의존성 정리: `sqflite`, `path`, `table_calendar`, `http`, `flutter_dotenv`
- [ ] `analysis_options.yaml` 활성화(엄격 린트)

## 2. 프로젝트 구조
- [ ] 디렉터리 생성: `lib/models`, `lib/db`, `lib/repository`, `lib/services`, `lib/screens`, `lib/widgets`
- [ ] 라우팅 스켈레톤 구성: `lib/main.dart`(목록/생성/상세)

## 3. 데이터 모델/스키마 설계
- [ ] 엔터티 정의
    - [ ] `Group(id, name, createdAt)`
    - [ ] `Member(id, groupId, name, orderIndex, payCount)`
    - [ ] `PaymentRecord(id, groupId, date, payerType[member|external], payerRefId, payerName, note)`
    - [ ] `Holiday(id, date, name, year)`
- [ ] 제약/인덱스
    - [ ] FK \+ `ON DELETE CASCADE`
    - [ ] `PaymentRecord(groupId, date)` 유니크
- [ ] 마이그레이션 버전 설계 및 초기 스키마 SQL 확정

## 4. DB 계층 구현
- [ ] `lib/group_db_helper.dart`: DB 초기화, 버전 마이그레이션, 트랜잭션 유틸
- [ ] Repository/DAO
    - [ ] Group: 생성/목록/삭제(연쇄 삭제)
    - [ ] Member: 추가/삭제/정렬/결제횟수 증감
    - [ ] PaymentRecord: 날짜 지정/변경/조회
    - [ ] Holiday: 연도별 upsert/조회

## 5. 화면 \- 그룹 생성
- [ ] `lib/screens/group_create_screen.dart`
    - [ ] 그룹명 입력(2~10자) 유효성
    - [ ] 멤버 최소 2명, 추가/삭제 UI
    - [ ] 저장 시 로컬 DB 반영, 에러 피드백

## 6. 화면 \- 그룹 목록
- [ ] `lib/screens/post_list_screen.dart`
    - [ ] 그룹 목록(이름, 멤버 수)
    - [ ] 삭제 아이콘 \+ 확인 팝업(확정 시 모든 관련 데이터 삭제)
    - [ ] 항목 클릭 시 상세 화면 이동

## 7. 화면 \- 그룹 상세/달력
- [ ] `lib/screens/group_detail_screen.dart`
    - [ ] 그룹명, 멤버 목록, 멤버별 결제횟수 표시
    - [ ] 결제횟수 증감 버튼(DB 동기화)
    - [ ] 달력(`table_calendar`) \+ 날짜 선택 시 결제자 표시
    - [ ] 결제자 지정 버튼
        - [ ] 멤버 목록 팝업 선택
        - [ ] 직접입력(외부 결제자) 지원
        - [ ] 기존 지정 변경 가능
        - [ ] 날짜 셀에 결제자 마커 표시
    - [ ] 다음 결제자 로직(라운드로빈 \+ 수동 조정 반영)

## 8. 공휴일 처리
- [ ] 앱 시작 시 연도 감지 \+ 공휴일 API 호출 \+ 로컬 저장
- [ ] 실패 시 캐시 폴백, 연도 전환 시 재동기화
- [ ] 달력에 공휴일 하이라이트/라벨 표시

## 9. 상태관리/아키텍처
- [ ] 상태관리 선택(예: Provider/ChangeNotifier) \+ 적용
- [ ] Repository → ViewModel → UI 단방향 데이터 흐름
- [ ] 글로벌 에러 핸들러/로깅 정책

## 10. 검증/유효성/예외
- [ ] 그룹명/멤버명 입력 검증 \+ 중복 방지
- [ ] 동일 날짜 중복 지정 방지 \+ 변경 UX
- [ ] 외부 결제자 입력 형식/노트 길이 제한

## 11. 테스트
- [ ] 단위: Repository/DAO, 다음 결제자 로직, 마이그레이션
- [ ] 위젯: 생성/목록/상세 주요 플로우
- [ ] 통합: 달력 지정→조회, 그룹 삭제 캐스케이드
- [ ] 성능: 대량 레코드 스크롤/쿼리

## 12. 빌드/배포
- [ ] `flutter run` 정상화 및 `android` 모듈 `assembleDebug` 통과
- [ ] 릴리스 서명 설정, 프로가드 검토
- [ ] 권한 최소화 및 개인정보 점검

## 13. CI/CD \& 운영
- [ ] GitHub Actions: Flutter \+ Gradle 캐시, 테스트, 빌드
- [ ] 시크릿/환경 변수 주입(`local.properties`, CI 시크릿)
- [ ] 크래시/로그 수집 도입 여부 결정

## 14. 문서/산출물
- [ ] `docs/erd.drawio` ERD 추가
- [ ] `SYSTEM_DESIGN.md` 초안(컨텍스트→컨테이너→컴포넌트)
- [ ] 운영/테스트 전략 문서화 및 `PRD.md` 상호 참조

## 완료 기준(샘플)
- [ ] 핵심 플로우: 그룹 생성→목록→상세→날짜별 결제자 지정/변경→다음 결제자 표시가 오프라인에서 일관 동작
- [ ] 공휴일 표시 및 연도별 동기화 동작
- [ ] DB 스키마 마이그레이션 및 그룹 삭제 캐스케이드 보장
- [ ] 기본 테스트 커버리지 확보 \+ 디버그 빌드 안정화