# 작업 체크리스트
- 문서명: 체크리스트
- 기준 문서: `PRD.md`
- 앱: Regular Dutch(그룹 결제자 관리 앱)
- 업데이트: 2025-10-24

## 1. 환경/빌드 정비
- [X] `android/settings.gradle`의 `com.android.application`/`com.android.library` 버전을 `8.3.0`으로 통일
- [X] `android/build.gradle`의 AGP `classpath` 중복 정의 제거(플러그인 버전은 `settings.gradle` 한 곳에서만 관리)
- [X] `android/gradle/wrapper/gradle-wrapper.properties`를 Gradle `8.5`~`8.6`으로 업데이트
- [X] File \> Settings(Ctrl+Alt+S) → Build, Execution, Deployment → Build Tools → Gradle
      Gradle JDK 드롭다운에서 17 선택하거나 Add JDK로 C:\Program Files\Java\jdk-17 폴더 지정.  난 C:\tools\jbr-17.0.8 선택
- [X] Flutter \+ 패키지 의존성 정리: `sqflite`, `path`, `table_calendar`, `http`, `flutter_dotenv`
- [ ] mcp연결은 아직 직접 AI를 통해서 하기는 어렵다  

## 2. 프로젝트 구조
- [X] 라우팅 스켈레톤 구성: `lib/main.dart`(목록/생성/상세)

## 3. 데이터 모델/스키마 설계
- [X] 엔터티 정의 (실제 구현 완료)
      - [X] `groups(id, name)` - 그룹 테이블
      - [X] `members(id, group_id, name)` - 멤버 테이블
      - [X] `payments(id, group_id, date, member)` - 결제 기록 테이블 (결제횟수는 런타임에 COUNT 계산)
      - [X] `holidays(holiday_date, name, last_updated)` - 공휴일 테이블
- [X] 제약/인덱스 (실제 구현 완료)
    - [X] FK + `ON DELETE CASCADE` (members.group_id → groups.id, payments.group_id → groups.id)
- [X] 마이그레이션 버전 설계 및 초기 스키마 SQL 확정

## 4. DB 계층 구현
- [X] `lib/group_db_helper.dart`: DB 초기화, 버전 마이그레이션, 트랜잭션 유틸
- [X] Repository/DAO
    - [X] Group: 생성/목록/삭제(연쇄 삭제)
    - [X] Member: 추가/삭제/정렬/결제횟수 증감
    - [X] PaymentRecord: 날짜 지정/변경/조회

## 5. 화면 \- 그룹 생성
- [X] `lib/screens/group_create_screen.dart`
    - [X] 그룹명 입력(2~10자) 유효성
    - [X] 멤버 최소 2명, 추가/삭제 UI
    - [X] 저장 시 로컬 DB 반영, 에러 피드백

## 6. 화면 \- 그룹 목록
- [X] `lib/screens/post_list_screen.dart`
    - [X] 그룹 목록(이름, 멤버 수)
    - [X] 삭제 아이콘 \+ 확인 팝업(확정 시 모든 관련 데이터 삭제)
    - [X] 항목 클릭 시 상세 화면 이동



## 7. 화면 \- 그룹 상세/달력
- [X] `lib/screens/group_detail_screen.dart`
    - [X] 그룹명, 멤버 목록, 멤버별 결제횟수 표시
    - [X] 달력(`table_calendar`) \+ 날짜 선택 시 결제자 표시
    - [X] 결제자 지정 버튼
     - [X] 멤버 목록 팝업 선택
     - [X] 직접입력(외부 결제자) 지원
     - [X] 날짜 셀에 결제자 마커 표시
     - [X] 결제 내역 삭제
    - [X] 다음 결제자 로직(minCount 기반 라운드로빈)
    - [X] 특별 결제 기능 (달력과 독립적, 결제횟수만 증가)
        - [X] 결제횟수 증감 기능 - 특별 결제 버튼으로 구현 (멤버 선택 + 사유 입력) 
        - [X] 날짜 선택, 사유 선택 
        - [X] 특별결제 삭제 (멤버 결제정보 화면에서 스와이프 삭제)
    - [X] 멤버별 결제횟수 화면 

## 7.  화면 그룹 상세- 멤버 상세
- [X]  멤버 클릭 시 멤버 상세 화면이동
  - [X] 각 멤버가 언제 결제했는지,  특별결제는 뭐가 있었는지 등이  나와야함. 목록으로 표시  날짜순 기준
  - [X] 특별 결제 항목 스와이프 삭제 기능

## 8. 공휴일 처리
- [ ] 앱 시작 시 연도 감지 + 공휴일 API 호출 + 로컬 저장 (main.dart - refreshHolidaysIfNeeded)
- [ ] 실패 시 캐시 폴백, 연도 전환 시 재동기화 (연도 변경 시 자동 갱신)
- [ ] 달력에 공휴일 하이라이트/라벨 표시 (group_detail_screen.dart - _loadHolidaysFromDB)
- [ ] **⚠️ 공공데이터포털 API 키 문제로 현재 비활성화 (TODO: 추후 해결)**


## 10. 검증/유효성/예외
- [ ] 그룹명/멤버명 입력 검증 \+ 중복 방지
- [ ] 동일 날짜 중복 지정 방지 \+ 변경 UX
- [ ] 외부 결제자 입력 형식/노트 길이 제한

## 11. 테스트
- [ ] 단위: Repository/DAO, 다음 결제자 로직, 마이그레이션
- [ ] 위젯: 생성/목록/상세 주요 플로우
- [ ] 통합: 달력 지정→조회, 그룹 삭제 캐스케이드
- [ ] 성능: 대량 레코드 스크롤/쿼리

## 12. 빌드/배포
- [ ] `flutter run` 정상화 및 `android` 모듈 `assembleDebug` 통과
- [ ] 릴리스 서명 설정, 프로가드 검토
- [ ] 권한 최소화 및 개인정보 점검

## 13. CI/CD \& 운영
- [ ] GitHub Actions: Flutter \+ Gradle 캐시, 테스트, 빌드
- [ ] 시크릿/환경 변수 주입(`local.properties`, CI 시크릿)
- [ ] 크래시/로그 수집 도입 여부 결정

## 14. 문서/산출물
- [ ] `docs/erd.drawio` ERD 추가
- [ ] `SYSTEM_DESIGN.md` 초안(컨텍스트→컨테이너→컴포넌트)
- [ ] 운영/테스트 전략 문서화 및 `PRD.md` 상호 참조

## 완료 기준(샘플)
- [ ] 핵심 플로우: 그룹 생성→목록→상세→날짜별 결제자 지정/변경→다음 결제자 표시가 오프라인에서 일관 동작
- [ ] 공휴일 표시 및 연도별 동기화 동작
- [ ] DB 스키마 마이그레이션 및 그룹 삭제 캐스케이드 보장
- [ ] 기본 테스트 커버리지 확보 \+ 디버그 빌드 안정화